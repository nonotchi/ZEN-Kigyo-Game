# 起業人生ゲーム
ZEN大学の起業サークルによる、2026年学園祭用のシステムです。このゲームを通して、起業について学ぶことができます。
これは単なる人生ゲームではありません！リアル会場でもオンライン参加でも一緒に楽しむことができ、リアル会場では物理的なルーレットを回す、電光掲示板にゲーム状況が表示されるなど、盛り上がる仕掛けがいっぱい！さらに、リアル会場の様子はオンライン参加の画面にもライブ配信され、会場に来られない方でも、あたかもそこにいるかのような体験ができます！

## 開発メンバー
- ZEN大学 起業サークル
  - 技術担当：ののっち

## 技術概略
システムは、レンタルサーバーで性的ホスティングされるフロントエンドに加え、バックエンドとしてWebSocketなどの通信にAWSを使用し、会場専用ページはCOMポートでルーレットや電光掲示板を接続して使用します。

### 言語
- フロントエンド：HTML, CSS, JavaScript
- AWS Lambda：Python
- 物理デバイス：C言語
  - ESP-IDF (ESP32)
  - MPLAB (PICマイコン)

### 物理デバイスについて
会場PCと直接接続するのは、システムの中央装置であるシスコン(システムコントローラ)であり、ルーレットや電光掲示板等は、RS485でシスコンに接続します。
ののっち得意のIoT技術を活用した無線通信も検討しましたが、大規模イベント内で行われるため、電波干渉のリスクがあり、安定して動作させるため、有線接続を採用しました。
シスコンと各機器との接続は、FTP(シールド付ツイストペア)ケーブルを使用し、接続点には産業用コネクタを使用することで、ノイズ耐性と接続の確実性を高めてます。
フルカラー表示が可能な電光掲示板の派手な表示と、メロディICによる音の効果で会場を盛り上げます！

### シスコン仕様
- COMポート：CH340
  - 115200bps、データ8ビット、パリティなし、ストップビット1
- RS485接続：MAX3485
  - 9600bps、データ8ビット、パリティなし、ストップビット1
- MCU：ESP32-S3-WROOM-1
  - 無線機能は使用しない

### 使用端末
メインの会場PCは、シスコンと接続する中央装置として機能し、会場のモニターにゲーム画面を映します。これ以外にも、端末が必要となります。
- 会場PC
  - メインのゲーム画面をモニターに映します。
  - COMポートでシスコンと接続する。
- 会場サブPC
  - ランキング情報など、サブモニターを表示します。
- 管理用端末
  - 参加者情報の管理
  - リーダーを接続し、二次元コードを読み取り出欠確認を行う。
  - 電光掲示板の表示文章の編集

★電光掲示板は、会場PCとの通信で自動的に表示されるものと、管理用端末から任意の文章を流すことができるものがあります。後者は複数設置しても良いでしょう。

### 会場専用ページの認証
会場専用ページは、オンラインアクセスできないような仕組みが必要です。ゲーム進行の妨げになったり、参加者情報が流出してしまいます！
具体的な方法を検討しましたが、会場には物理デバイスがあるため、所持情報として認証を行うこととしました。
ソースコードがこのリポジトリで公開されているため、ハードウェアで認証を行い、ソースコードから認証情報を取得されるリスクを避けます。

あらかじめユニーク(重複しない)なIDが書き込まれたEEPROMである 24AA02UIDを使用し、会場PCはシスコンからこれを取得しAPIの認証に使用します。ハードウェア上に存在するため、ソースコードから認証情報を取得されるリスクがありません。なお、事前にこのUIDをAPI Gatewayのオーソライザに登録しておく必要があります。

また、サブPCや管理用端末にもトークンとして同様のデバイスを用意し、別の認証とすることで、最小権限の原則としてそれぞれがアクセスできるAPIを制限します。トークンを複数用意すれば、端末の追加も容易です。

## ゲーム内容

今後起業サークルメンバーで検討していきます。
